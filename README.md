# Reading-E

阅读·E是原版阅读导出功能特化版，通过反编译修改替换部分安装包资源文件实现定制导出的epub。

### 简单使用教程
以新安装为例，书架右上角┇更多选项，缓存/导出，右上角┇更多选项，导出格式改为epub，勾选多线程导出

返回书架，右上角┇更多选项，添加本地，导入一本TXT书籍，然后回到书架，长按对应书籍，右上角┇更多选项，取消勾选拆分超长章节。

返回书架，右上角┇更多选项，缓存/导出，点击目标书籍右边的导出

### 目录与划分章节
阅读内置多条 TXT 目录规则，可修改，也可针对不同书籍单独设置。TXT目录规则和导入的TXT文本质量，会直接决定导出 EPUB 时的章节划分效果。

比如，如果第二章未能被目录规则正确匹配，那么在阅读目录中它会被归入第一章，导出时也同样会被划分到第一章中。而且，导出的 EPUB 分章与阅读中的章节目录是完全对应的。

这时就需要手动调整第二章的标题，使其能够符合所选目录规则的匹配要求。比如，‘第一 章节名’缺少了‘章’，而‘第一章章节名’则缺少空格。

阅读目录左下角会显示当前章节序号/总章节数，这可以用来确认是否有章节未被目录规则匹配，从而更快速地定位问题章节。

### 两种情况
默认情况下，TXT目录规则的“第一个目录”（去除空白）和“第二个目录”在某些情况下可以选择更合适的项。

如果TXT文件开头直接以“序章”“第一章”等可直接匹配的章节开头，建议选择第二个目录。若选择第一个目录，第一个章节内容会被归为简介。

如果TXT文件开头有其他内容，如“书名”“作者：作者名”或作品相关设定，则选择第一个或第二个目录效果相同，此时“序章/第一章”前的内容会被统一归入简介。
### 样式与CSS
阅读·E 内置的修改版 main.css 仅针对阅微的显示效果进行优化，在其他阅读软件上可能效果一般。

如果想更改默认电子书样式，可以使用 MT 管理器修改或替换epub文件中的 /assets/epub 目录下的 main.css 文件。

`h2.head` 第一章 章节名

`h2 span.number` 第一章

`h2 span.title` 章节名

### 封面
无论导入的本地 TXT 中使用的是本地图片还是网络图片，导出后电子书仍会显示默认封面。因此，如果想修改 EPUB 封面，只能在导出完成后，通过 MT 管理器替换epub文件中的 /OEBPS/Images 目录下的 cover.jpg 文件来实现。
### 标识符字段
UUID 或 MD5 通常用于阅读软件识别 EPUB 的唯一性。

在阅微中，可以通过 MT 管理器手动在 EPUB 文件的 content.opf 中 metadata 部分添加以下字段，从而避免重复导入或在删除后重新导入时丢失阅读时长和进度的问题。

其中的字符串部分需要替换为实际使用的内容，可以通过网页在线工具生成 md5 摘要，例如对“书名 作者：作者名”生成 32 位的 MD5 值。
```
        <meta property="reamicro:md5" content="字符串"/>
```
### 替换净化
替换净化规则的修改不仅会影响阅读软件中显示的内容，也会影响缓存导出后的 EPUB 文件。软件初始状态下规则为空，即便启用了替换净化，也不会生效。

- 书籍阅读界面：右上角“┇更多选项”中有该书单独的、默认开启的替换净化开关。
- 书籍目录界面：右上角“┇更多选项”提供统一的替换开关，仅作用于目录。
- 我的 → 其它设置：默认开启“启用替换净化”规则，这会影响新加入书架的书是否自动启用替换净化。
- 缓存/导出界面：右上角“┇更多选项”中也有默认开启的替换净化选项，可影响导出的内容。

推荐的替换净化规则：

- 数字标题 `https://gh-proxy.com/https://github.com/sjshb57/legado-57/releases/download/v2.5.6/2.5.6.-CV.json`
